document.querySelector("#eclerx-newsletter")?.addEventListener("submit",e=>{e.preventDefault();const t=e.target,r=t.querySelectorAll("input[required]");let a=null;if(r.forEach(e=>{const t=document.getElementById(`${e.id}-error`);var r;e.value.trim(),e.value.trim()?"email"!==e.name||(r=e.value,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))?(t.textContent="",e.setAttribute("aria-invalid","false")):(t.textContent=`${e.name} is not valid.`,e.setAttribute("aria-invalid","true"),a||(a=e)):(t.textContent=`${e.name} is required.`,e.setAttribute("aria-invalid","true"),a||(a=e))}),a)a.focus();else{const e=t.querySelector("#safename")?.value.trim()||"",r=t.querySelector("#firstname")?.value.trim()||"",a=t.querySelector("#surname")?.value.trim()||"",i=t.querySelector("#email")?.value.trim()||"",n=t.parentElement.querySelector("#eclerx-info-message");n.textContent="Submitting...",n.setAttribute("data-status","info"),submitForm({safeName:e,firstName:r,surName:a,email:i})}});